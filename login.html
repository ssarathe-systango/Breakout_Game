<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Login Form</title>
  <link rel="stylesheet" href="login.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>
  <div class="center">
    <h1>Login</h1>
    <div class="myform">
      <div class="text">
        Username <input type="text" id="uname" required>

      </div>

      <div class="text">
        Password<input type="password" id="pass" required>

      </div>

      <!-- <input type="submit" value="Login"> -->
      <div class="signup_link">
        <!-- <a href=" "><input type="button" id="login">Login</a> -->
        <button id="click" onclick="Authentication()" class="btn btn-primary">Login</button>
      </div>


      <div class="signup_link">
        Not a member? <a href="register.html">Signup</a>
      </div>
    </div>
  </div>
  <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
  <!-- <script>
    function fn(){
      let user_name = document.getElementById('UNAME').value;
      let user_pass = document.getElementById('PASSWORD').value;
      alert( user_name+" "+user_pass);
    }
  </script> -->
  <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"> </script>

  <script>

    // document.getElementById("insert").addEventListener('click', insertUser);


    //  import{intializaApp} from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";


    const firebaseConfig = {
      apiKey: "AIzaSyDzBeh1scj-vECh-Rh2dQnLSf5O3XyTrGA",
      authDomain: "breakout-game-3710f.firebaseapp.com",
      databaseURL: "https://breakout-game-3710f-default-rtdb.firebaseio.com",
      projectId: "breakout-game-3710f",
      storageBucket: "breakout-game-3710f.appspot.com",
      messagingSenderId: "602197715891",
      appId: "1:602197715891:web:5b01f760950f470c4ef9c6"
    };


    // Initialize Firebase
    // The entry point of Firebase SDKs. It holds common configuration and state for Firebase APIs. Most applications don't need to directly interact with FirebaseApp.


    const app = firebase.initializeApp(firebaseConfig);

    // import { getDatabase, ref, get, set, child, update, remove }
    //   from "https://www.gstatic.com/firebasejs/4.8.1/firebase-database.js";

    const db = firebase.database();



    function Authentication() {
      let Username = document.getElementById('uname').value;
      let Password = document.getElementById('pass').value;
      db.ref('Registered Users').once('value')
        .then(function (snapshot) {
          var count = 0;
          snapshot.forEach((item) => {

            var flag = false;
            uname = item.val().uname;
            pass = item.val().pass;
            if (uname == Username && pass == Password) {
              flag = true;
              window.location = "index.html";
            }
            count++;
            if (count == snapshot.numChildren()) {
              if (flag == false) {
                alert("Username Or Password Is Incorrect");
              }
            }
          });
        })
        .catch((error) => {
          console.log(error);
          return false;
        });
    }
    function login(user) {
      window.location = "index.html";
    }


  </script>
</body>

</html>